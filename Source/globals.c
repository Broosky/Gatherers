/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Program Name: Gatherers (C)                                                                                             //
// Author: Jeffrey Bednar                                                                                                  //
// Copyright (c) Illusion Interactive, 2011 - 2025.                                                                        //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef _GLOBALS_C_
#define _GLOBALS_C_
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include "../Headers/constants.h"
#include "../Headers/types.h"
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void __cdecl GLOBALS_Zero(GLOBALS* p_Globals) {
	ZeroMemory(p_Globals, sizeof(GLOBALS));
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
GLOBALS* __cdecl GLOBALS_Create(void) {
	GLOBALS* p_Globals = (GLOBALS*)malloc(sizeof(GLOBALS));
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	GLOBALS_Zero(p_Globals);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	p_Globals->iRunningHeap += sizeof(GLOBALS);
	return p_Globals;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
int __cdecl GLOBALS_Kill(GLOBALS* p_Globals) {
	int iRemainingHeap = p_Globals->iRunningHeap;
	free(p_Globals);
	iRemainingHeap -= sizeof(GLOBALS);
	return iRemainingHeap;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Settings that only need to be calculated once or I would like toggled on at run-time.
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void __cdecl GLOBALS_Init(GLOBALS* p_Globals, HINSTANCE hInstance) {
	p_Globals->usIdStamp = 1;
	p_Globals->usThreshold = 15;
	p_Globals->iMineralCount = 10000;
	p_Globals->iGasCount = 10000;
	p_Globals->iTotalSupply = 10;
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// The map that we are going to use that is shared among the terrain and minimap images.
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	p_Globals->usMapIndex = 0;
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// The modules instance needs to be captured incase resources are loaded directly from the executable.
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	p_Globals->hInstance = hInstance;
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Animation engine is based of the processing speed.
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	p_Globals->fAnimationTick = 1000.0f * (1.0f / ANIMATE_FPS) * ENGINE_FPS / 1000.0f;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#endif
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
